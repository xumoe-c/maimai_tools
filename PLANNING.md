# 舞萌DX 实用工具站 - 项目规划文档

## 1. 项目概述
*   **项目名称**: 舞萌DX 实用工具站 (Maimai Tools)
*   **核心目标**: 提供方便快捷的舞萌DX相关辅助工具，初期核心功能为“生涯歌曲喜好表生成器”。
*   **设计原则**: 
    *   **响应式设计**: 移动端优先，兼顾桌面端体验。
    *   **参考风格**: 参考 `map.bemanicn.com` (全国音游地图)。采用**侧边栏布局**，**粗边框**，**高对比度**，**卡片式入口**的设计语言。
    *   **纯前端**: 无需后端，保护隐私。

## 2. 技术栈建议
*   **核心框架**: Vue.js 3 (推荐) 或 React。
*   **构建工具**: Vite。
*   **样式方案**: Tailwind CSS (极易实现粗边框和响应式布局)。
*   **UI 组件库**: Naive UI (风格较搭) 或手写基础组件以完全匹配参考风格。
*   **绘图/生成库**: `html2canvas`。
*   **图标库**: FontAwesome 或 Material Icons (可配合像素风图标)。

## 3. 站点结构 (Sitemap)
```text
/ (根目录)
├── index.html          # 首页 (工具导航大厅)
├── generator/          # 工具目录
│   └── preference-table/ # 生涯歌曲喜好表生成器
│       └── index.html
├── about/              # 关于/帮助
│   └── index.html
└── assets/             # 静态资源
```

## 4. UI 设计风格 (Design System)
基于参考站点 (`map.bemanicn.com`) 的视觉特征：

*   **布局框架**:
    *   **PC端**: 左侧固定侧边栏 (Sidebar) + 右侧主内容区 (Main Content)。
    *   **移动端**: 顶部标题栏 (Header) + 汉堡菜单 (Drawer) + 内容流。
*   **视觉元素**:
    *   **边框**: 显眼的黑色粗边框 (e.g., `border-2 border-black`)，用于分割区域和卡片。
    *   **色彩**: 
        *   背景: 纯白 (`#FFFFFF`) 或极浅灰。
        *   文字/边框: 纯黑 (`#000000`)。
        *   强调色: 舞萌DX风格的高饱和度颜色 (粉色、天蓝、明黄)，用于卡片背景或按钮。
    *   **排版**: 清晰的标题层级，面包屑导航。
    *   **图标**: 像素风格或简洁线条风格。

## 5. 页面详细规划

### 5.1 公共布局 (Layout)
*   **侧边栏 (Sidebar) - PC端**:
    *   **Logo区**: 像素风/游戏风 Logo，居中或左对齐。
    *   **导航菜单**: 垂直列表 (首页, 工具列表, 关于)。选中项有高亮背景或粗边框指示。
    *   **底部功能区**: 暗色模式切换开关、GitHub 链接、版权简写。
*   **主内容区 (Main Content)**:
    *   **顶部栏**: 面包屑导航 (e.g., "首页 / 喜好表生成器")，当前页面标题。
    *   **内容容器**: 带有内边距的白色区域。

### 5.2 首页 (Home)
*   **公告/Banner区**: 类似参考站点的横幅，展示最新更新或活动（可选）。
*   **工具导航区 (核心)**:
    *   参考截图中的“查找机台”区域。
    *   使用**大尺寸彩色卡片**展示工具入口。
    *   **卡片样式**: 粗黑边框，鲜艳背景色 (如: 喜好表生成器用粉色背景)，包含大图标和标题。
    *   *示例*: 
        *   [🎨 生涯喜好表] (粉色背景)
        *   [📊 B50 计算器] (蓝色背景 - 规划中)
        *   [❓ 随机选曲] (黄色背景 - 规划中)

### 5.3 生涯歌曲喜好表生成器 (Core Feature)
保持左右分栏逻辑，但容器样式需适配新风格。

#### 布局结构
*   **PC端**:
    *   左侧 (配置): 放置在带粗边框的白色卡片中。
    *   右侧 (预览): 放置在带粗边框的灰色/网格背景区域中，模拟画布感。
*   **移动端**:
    *   上下堆叠，配置区和预览区通过明显的分割线区分。

#### 功能规格 (Feature Specs)
*   **画布内容**:
    *   **头部信息**: 包含标题 "Maimai生涯歌曲喜好表"、玩家名称、DX Rating。
    *   **宫格布局**: 3列 x 4行，共12个单元格。
    *   **单元格标签**:
        1.  最爱的一首
        2.  水平代表作
        3.  最喜欢的谱面
        4.  最苦手的
        5.  第一次推分
        6.  最近在推分
        7.  玩最多次的
        8.  觉得最阴的
        9.  最期待国服更新
        10. 拼机最不希望对方选
        11. 和新手拼机体会选
        12. 最想安利的谱面
*   **自动填充逻辑**:
    *   用户从曲库或个人记录中选择歌曲后，程序自动提取并插入：
        *   **封面图** (Cover Art)
        *   **歌曲名称** (Song Title)
        *   **游玩次数** (Play Count - 若对接了查分器数据)
*   **交互细节**:
    *   **输入框/下拉框**: 使用方形直角设计，带黑色边框。
    *   **按钮**: 实体按钮风格，带黑边框和阴影。
    *   **歌曲选择弹窗**: 全屏或大尺寸模态框，支持搜索。

## 5. 关键组件 (Components)

### 5.1 基础 UI 组件
*   `AppButton`: 通用按钮 (主色调、次级、危险)。
*   `AppInput`: 文本输入框。
*   `AppSelect`: 下拉选择器。
*   `AppModal`: 弹窗容器 (用于歌曲选择)。
*   `AppCard`: 卡片容器。

### 5.2 业务组件
*   `SongSelector`: 歌曲搜索与选择器组件。
    *   *功能*: 接收搜索词，过滤歌曲数据，返回选中的歌曲对象。
*   `PreferenceGrid`: 喜好表网格组件。
    *   *功能*: 渲染表格结构，处理单元格点击事件，显示已选歌曲封面。
*   `CanvasExporter`: 导出组件。
    *   *功能*: 封装 `html2canvas` 逻辑，处理高分屏模糊问题，提供下载触发。

## 6. 数据结构设计 (Data Schema)

### 6.1 歌曲数据 (songs.json)
数据源参考: [Diving-Fish/maimaidx-prober](https://github.com/Diving-Fish/maimaidx-prober)。
需要适配其数据格式，并维护一份前端可用的歌曲数据库，建议包含以下字段：
```json
{
  "id": "1001",
  "title": "Garakuta Doll Play",
  "artist": "t+pazolite",
  "genre": "maimai",
  "cover_url": "https://www.diving-fish.com/covers/1001.png", // 直接引用或本地缓存
  "version": "maimai",
  "search_keywords": ["gdp", "垃圾", "garakuta"],
  "ds": [12.5, 13.8, ...] // 定数信息 (可选，用于排序)
}
```

### 6.2 喜好表配置 (User Config)
```json
{
  "username": "MaimaiPlayer",
  "theme": "default_blue",
  "cells": {
    "fav_1": "1001", // 对应歌曲ID
    "hard_1": "1002"
  }
}
```

## 7. 开发路线图 (Roadmap)
1.  **Phase 1: 框架与布局**: 初始化 Vue3 + Tailwind，实现侧边栏布局 (Sidebar Layout)。
2.  **Phase 2: 首页实现**: 复刻参考站点的卡片式入口设计。
3.  **Phase 3: 数据集成**: 对接 `Diving-Fish` 数据源，编写脚本处理 `music_data.json`，生成前端所需的精简版数据。
4.  **Phase 4: 生成器核心**: 开发喜好表生成器的配置面板和预览画布。
5.  **Phase 5: 样式打磨**: 调整边框粗细、阴影和配色，确保还原“音游地图”站点的硬朗风格。
